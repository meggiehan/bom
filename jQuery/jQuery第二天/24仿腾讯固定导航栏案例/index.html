
<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>防腾讯固定导航栏</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        .main {
            width: 1000px;
            margin: 0 auto;
        }
        /*.top {
            height: 171px;
        }
        .nav {
            height: 86px;
        }*/
    </style>
    <script src="../jquery-1.12.2.js"></script>
    <script>
        // jQuery的入口函数 什么时候执行的？
        // 文档加载完成就执行
        // $(function() {
        // });
        window.onload = function () {
            // 获取top的高度
            var h = $(".top").height();
            // console.log(h);
            // 1. 给window 绑定滚动事件：scroll
            $(window).scroll(function () {
                // 2. 判断文档的scrollTop值，跟top高度比较
                var st = $(document).scrollTop();
                // console.log(st);
                if(st >= h) {
                    // 3. 如果，scrollTop的值大于 top的高度， 就让导航栏固定
                    // $(".nav").css("position", "fixed");
                    $(".nav").css({
                        "position": "fixed",
                        "top": 0
                    });

                    // 处理main ，因为nav这块，定位变为固定定位，此时，会脱离文档流
                    // 所以，要给main设置 margin-top 为：导航栏的高度

                    $(".main").css("margin-top", $(".nav").height());
                } else {
                    // 4. 相反，就让导航栏  变回原来的位置
                    $(".nav").css("position", "static");
                    $(".main").css("margin-top", 0);
                }


            });
        }

        $(function(){
            var h= $(".top").height();
            $(window).scroll(function(){
            var st=$(document).scrollTop();
                if(st>=h){
                    $(".nav").css({
                        "position":"fixed",
                        "top":0
                    })
                    $(".main").css("margin-top",$(".nav").height());
                }
                else{
                    $(".nav").css({
                        "position":"static",
                        "top":0
                    })
                    $(".main").css("margin-top",0);
                }

            })

        })

    </script>
</head>

<body>
<div class="top">
    <img src="images/top.png" />
</div>
<div class="nav">
    <img src="images/nav.png" />
</div>
<div class="main">
    <img src="images/main.png" />
</div>
</body>

</html>
